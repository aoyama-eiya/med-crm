(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85230,e=>{"use strict";var a=e.i(43476),s=e.i(71645);let r=[{id:"welcome",name:"初回友だち追加時あいさつ",category:"greeting",enabled:!0,trigger:"LINE友だち登録時",delay:"即時",message:"はじめまして！メディカルCRMクリニックです。\nご予約はリッチメニューから簡単に行えます。\n不明な点はお電話でも承っております。"},{id:"after-pollen",name:"【花粉症】受診後アフターフォロー",category:"after-care",enabled:!0,trigger:"受診タグ: 花粉症",delay:"受診から1日後",message:"昨日はご来院ありがとうございました。\n処方されたお薬の効果はいかがでしょうか？\nもし眠気が強い場合は、お薬の変更も可能ですのでご相談ください。"},{id:"after-vaccine",name:"【ワクチン】接種後体調確認",category:"after-care",enabled:!0,trigger:"受診タグ: ワクチン接種",delay:"接種から1日後",message:"ワクチン接種お疲れ様でした。\n本日は腕の痛みや発熱などの副反応はいかがでしょうか？\n水分を多めにとって、無理せずお過ごしください。"},{id:"after-cold",name:"【風邪・発熱】受診後のお伺い",category:"after-care",enabled:!0,trigger:"受診タグ: 風邪, 発熱",delay:"受診から2日後",message:"その後、体調はいかがでしょうか？\nお薬が合わない場合や、熱が下がらない場合は再度ご来院ください。"},{id:"seasonal-pollen",name:"【季節】花粉症シーズン到来のお知らせ",category:"seasonal",enabled:!0,trigger:"過去の受診タグ: 花粉症 (1年前)",delay:"2月1日 10:00",message:"今年の花粉シーズンが近づいてきました。\n昨シーズンご来院された患者様へお送りしています。\n早めの投薬で症状を抑えることができます。Web予約よりお待ちしております。"}];function l(){let[e,l]=(0,s.useState)("welcome"),[n,c]=(0,s.useState)(r),i=n.find(a=>a.id===e)||n[0];return(0,a.jsxs)("div",{className:"h-full flex flex-col gap-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[(0,a.jsxs)("h1",{className:"text-xl font-bold text-mac-text flex items-center gap-2",children:[(0,a.jsx)("span",{className:"material-symbols-rounded text-mac-accent",children:"schedule_send"}),"自動メッセージ管理"]}),(0,a.jsxs)("button",{className:"bg-mac-accent text-white px-5 py-2 font-bold shadow-sm hover:opacity-90 flex items-center gap-2 transition-all text-sm",children:[(0,a.jsx)("span",{className:"material-symbols-rounded text-lg",children:"add"}),"新規シナリオ作成"]})]}),(0,a.jsxs)("div",{className:"flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-12 gap-6 pb-2",children:[(0,a.jsx)("div",{className:"lg:col-span-5 flex flex-col gap-4 overflow-y-auto pr-2",children:(0,a.jsxs)("div",{className:"bg-white border border-gray-300 shadow-sm flex flex-col",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-50 border-b border-gray-200 text-xs font-bold text-gray-500 uppercase",children:"稼働中のシナリオ"}),(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:n.map(s=>(0,a.jsxs)("div",{onClick:()=>l(s.id),className:`p-4 cursor-pointer hover:bg-gray-50 transition-all flex items-center justify-between group ${e===s.id?"bg-blue-50 border-l-4 border-l-mac-accent":"border-l-4 border-l-transparent"}`,children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:`px-2 py-0.5 text-[10px] font-bold border ${d(s.category)}`,children:t(s.category)}),s.enabled?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-[10px] font-bold text-green-600",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"ON"]}):(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-400",children:"OFF"})]}),(0,a.jsx)("p",{className:"text-sm font-bold text-mac-text group-hover:text-mac-accent transition-colors",children:s.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1 truncate",children:[s.trigger," / ",s.delay]})]}),(0,a.jsx)("span",{className:"material-symbols-rounded text-gray-300 group-hover:text-mac-accent",children:"chevron_right"})]},s.id))})]})}),(0,a.jsxs)("div",{className:"lg:col-span-7 flex flex-col h-full bg-white border border-gray-300 shadow-sm relative",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`px-2 py-1 text-[10px] font-bold border mb-2 inline-block ${d(i.category)}`,children:t(i.category)}),(0,a.jsx)("h2",{className:"text-lg font-bold text-mac-text",children:i.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500",children:"稼働スイッチ"}),(0,a.jsx)("button",{onClick:()=>{var e;return e=i.id,void c(a=>a.map(a=>a.id===e?{...a,enabled:!a.enabled}:a))},className:`w-12 h-6 rounded-full p-1 transition-all ${i.enabled?"bg-green-500":"bg-gray-300"}`,children:(0,a.jsx)("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${i.enabled?"translate-x-6":""}`})})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-mac-text border-l-4 border-mac-accent pl-2",children:"配信条件 (トリガー)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"対象ターゲット"}),(0,a.jsx)("div",{className:"w-full bg-gray-50 border border-gray-300 p-2 text-sm font-bold text-mac-text",children:i.trigger})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"配信タイミング"}),(0,a.jsx)("div",{className:"w-full bg-gray-50 border border-gray-300 p-2 text-sm font-bold text-mac-text",children:i.delay})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"material-symbols-rounded text-sm",children:"info"}),"電子カルテ連携により、患者の来院情報・処方情報と紐づけて判定されます。"]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-[300px]",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-mac-text border-l-4 border-mac-accent pl-2 mb-3",children:"メッセージ内容"}),(0,a.jsxs)("div",{className:"flex-1 border border-gray-300 bg-gray-50 p-4 flex gap-4",children:[(0,a.jsxs)("div",{className:"w-[240px] flex-shrink-0 bg-white border border-gray-200 shadow-sm p-2",children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-400 text-center mb-2",children:"LINE画面プレビュー"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex-shrink-0"}),(0,a.jsx)("div",{className:"bg-[#efffde] p-2 rounded-lg text-xs text-black border border-gray-100 whitespace-pre-wrap leading-relaxed shadow-sm",children:i.message})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500 mb-1",children:"送信テキスト編集"}),(0,a.jsx)("textarea",{value:i.message,onChange:a=>{var s;return s=a.target.value,void c(a=>a.map(a=>a.id===e?{...a,message:s}:a))},className:"flex-1 w-full border border-gray-300 p-3 text-sm focus:ring-2 focus:ring-mac-accent outline-none font-medium resize-none leading-relaxed"}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["※ ",`{患者名}`," などの変数は自動置換されます。"]})]})]})]})]})]})]})]})}function t(e){switch(e){case"greeting":return"あいさつ";case"after-care":return"アフターケア";case"seasonal":return"季節・リマインド";default:return"その他"}}function d(e){switch(e){case"greeting":return"bg-green-50 text-green-600 border-green-200";case"after-care":return"bg-blue-50 text-blue-600 border-blue-200";case"seasonal":return"bg-orange-50 text-orange-600 border-orange-200";default:return"bg-gray-50 text-gray-600 border-gray-200"}}e.s(["default",()=>l])}]);